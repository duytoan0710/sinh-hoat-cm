

<div class="bg-white rounded-2xl shadow-xl animate-fade-in">
  <!-- Header -->
  <div class="flex justify-between items-center pt-6 pb-4 px-6 sm:pt-8 sm:pb-4 sm:px-8 border-b">
      <h2 class="text-xl font-semibold text-gray-800 tracking-wide">{{ session().title }}</h2>
      <button (click)="goBack()" class="text-sm text-indigo-600 hover:text-indigo-800 font-semibold flex items-center gap-1"> 
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M11 17l-5-5m0 0l5-5m-5 5h12" />
        </svg>
        Về trang chính
      </button>
  </div>
  
  <div class="p-6 sm:p-8">
    @if (!session().grade) {
      <div class="text-center">
        <h3 class="text-lg font-medium text-gray-900">Vui lòng chọn khối để tạo biên bản</h3>
        <p class="mt-2 text-sm text-gray-500">Mỗi khối sẽ có một mẫu biên bản sinh hoạt chuyên môn khác nhau.</p>
        <div class="mt-8 grid grid-cols-1 sm:grid-cols-3 gap-6">
          <button (click)="selectGrade('Khối 1')" class="flex flex-col items-center justify-center p-8 bg-indigo-50 rounded-lg hover:bg-indigo-100 transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
            <span class="text-2xl font-bold text-indigo-700">Khối 1</span>
          </button>
          <button (click)="selectGrade('Khối 2, 3')" class="flex flex-col items-center justify-center p-8 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2">
            <span class="text-2xl font-bold text-purple-700">Khối 2, 3</span>
          </button>
          <button (click)="selectGrade('Khối 4, 5')" class="flex flex-col items-center justify-center p-8 bg-pink-50 rounded-lg hover:bg-pink-100 transition-colors focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-2">
            <span class="text-2xl font-bold text-pink-700">Khối 4, 5</span>
          </button>
        </div>
      </div>
    } @else {
      @switch (session().grade) {
        @case ('Khối 1') {
          <app-grade1-meeting-form 
            [initialData]="session().data.meetingData"
            (formSubmitted)="onFormSubmitted($event)"
            (viewClicked)="onViewClicked()"
            (downloadClicked)="onDownloadClicked()">
          </app-grade1-meeting-form>
        }
        @case ('Khối 2, 3') {
           <app-grade23-meeting-form 
            [initialData]="session().data.meetingData"
            (formSubmitted)="onFormSubmitted($event)"
            (viewClicked)="onViewClicked()"
            (downloadClicked)="onDownloadClicked()">
          </app-grade23-meeting-form>
        }
        @case ('Khối 4, 5') {
           <app-grade45-meeting-form 
            [initialData]="session().data.meetingData"
            (formSubmitted)="onFormSubmitted($event)"
            (viewClicked)="onViewClicked()"
            (downloadClicked)="onDownloadClicked()">
          </app-grade45-meeting-form>
        }
        @default {
           <div class="text-center p-12 bg-gray-50 rounded-lg">
              <h3 class="text-lg font-medium text-gray-900">Đã chọn: {{ session().grade }}</h3>
              <p class="mt-2 text-sm text-gray-600">
                Chức năng tạo biên bản chi tiết cho khối này đang được xây dựng. <br>
                Vui lòng quay lại sau hoặc liên hệ quản trị viên.
              </p>
              <button (click)="goBackToGradeSelection()" class="mt-6 rounded-md bg-white px-3.5 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50">
                Chọn lại khối khác
              </button>
            </div>
        }
      }
    }
  </div>
</div>